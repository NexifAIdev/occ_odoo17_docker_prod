# --------------------------------------------
# ğŸ”§ Base Tomcat with JDK 11
# --------------------------------------------
FROM tomcat:9.0.82-jdk11

# --------------------------------------------
# ğŸ“‚ Set working directory
# --------------------------------------------
WORKDIR /usr/local/tomcat

# --------------------------------------------
# ğŸ“ Copy pre-unzipped servlet webapp
# --------------------------------------------
COPY webapps/pentaho-reports-for-odoo /usr/local/tomcat/webapps/pentaho-reports-for-odoo

# --------------------------------------------
# ğŸ©º Healthcheck
# --------------------------------------------
HEALTHCHECK --interval=30s --timeout=10s --retries=3 \
    CMD curl -sf http://localhost:8080/ || exit 1

# --------------------------------------------
# ğŸšª Expose Tomcat port and start
# --------------------------------------------
EXPOSE 8080
CMD ["catalina.sh", "run"]